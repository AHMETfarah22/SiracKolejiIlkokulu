
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
 <link rel="icon" type="image/png" href="../image/favicon.ico" />

<style>
  :root{
    --site-primary: var(--primary, #72e98c);
    --form-bg: #ffffff;
    --form-text: #222;
    --input-bg: #f8f9fa;
    --radius: 10px;
    --shadow: 0 6px 20px rgba(0,0,0,0.08);
  }
  .onbasvuru-card{
    max-width: 820px;
    margin: 28px auto;
    background: var(--form-bg);
    color: var(--form-text);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 22px;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  .onbasvuru-grid{
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  @media (max-width:720px){ .onbasvuru-grid{ grid-template-columns: 1fr; } }
  .onbasvuru-card h3{ margin:0 0 12px 0; color:var(--site-primary); }
  .form-row{ display:flex; flex-direction:column; gap:6px; margin-bottom:8px; }
  label{ font-size:0.92rem; }
  input[type="text"], input[type="tel"], input[type="email"], select, textarea{
    padding:10px 12px;
    border-radius:8px;
    border:1px solid #e6e6e6;
    background:var(--input-bg);
    font-size:0.95rem;
    width:100%;
    box-sizing:border-box;
  }
  textarea{ min-height:90px; resize:vertical; }
  .submit-row{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-top:8px; }
  .btn-submit{
    background: linear-gradient(180deg, var(--site-primary), darken(var(--site-primary),6%));
    color:#fff;
    border:none;
    padding:10px 18px;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    box-shadow: 0 6px 14px rgba(13,110,253,0.18);
  }
  .btn-submit{ background: var(--site-primary); }
  .note{ font-size:0.9rem; color:#666; }
  .success-msg, .error-msg{ display:none; padding:10px; border-radius:8px; margin-top:10px; }
  .success-msg{ background:#e6ffef; color:#0a7a3a; }
  .error-msg{ background:#ffe6e6; color:#a12b2b; }
  /* small helper */
  .fullwidth{ grid-column: 1 / -1; }
</style>

<div class="onbasvuru-card" id="onbasvuru-block">
  <h3>Ön Kayıt Formu</h3>
  <p class="note">Lütfen aşağıdaki bilgileri doldurun. Okul sizi en kısa sürede bilgilendirecektir.</p>

  <form id="onbasvuru-form" class="">
    <div class="onbasvuru-grid">
      <div class="form-row">
        <label for="veliadi">Veli Adı Soyadı</label>
        <input id="veliadi" name="veliadi" type="text" required>
      </div>

      <div class="form-row">
        <label for="ogrenciadi">Öğrenci Adı Soyadı</label>
        <input id="ogrenciadi" name="ogrenciadi" type="text" required>
      </div>

      <div class="form-row">
        <label for="telefon">Telefon Numara</label>
        <input id="telefon" name="telefon" type="tel" required>
      </div>

      <div class="form-row">
        <label for="email">E-posta</label>
        <input id="email" name="email" type="email">
      </div>
     <select id="sinif" name="sinif" required onchange="kontrolEt()">
        <option value="">Seçiniz...</option>
        <option value="anaokulu">Anaokulu/kloje</option>
        <option value="1">1. Sınıf</option>
        <option value="2">2. Sınıf</option>
        <option value="3">3. Sınıf</option>
       <option value="4">4. Sınıf</option>
       <option value="diger">Diğer</option>
    </select>

<!-- MODAL -->
<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="modalKapat()">&times;</span>
        <h2>Not Ekleyiniz</h2>
        <input type="text" id="notInput" placeholder="Sınıf notunu buraya yazın...">
        <button onclick="modalKapat()">Kaydet</button>
    </div>
</div>
      

      <div class="form-row">
        <label for="dogum">Doğum Tarihi (öğrenci)</label>
        <input id="dogum" name="dogum" type="text" placeholder="GG.AA.YYYY">
      </div>

      <div class="form-row fullwidth">
        <label for="adres">Adres</label>
        <textarea id="adres" name="adres"></textarea>
      </div>

      <div class="form-row fullwidth">
        <label for="mesaj">Ek Not / Mesaj</label>
        <textarea id="mesaj" name="mesaj" placeholder="Varsa eklemek istediğiniz bilgiler"></textarea>
      </div>
    </div>

    <div class="submit-row">
      <div>
        <small class="note">Form gönderildiğinde okul yetkilileri sizinle iletişime geçecektir.</small>
      </div>

      <div style="display:flex; gap:8px; align-items:center;">
        <button type="button" class="btn-submit" onclick="window.location.href='index.html'">İptal</button>
        <button type="submit" class="btn-submit">Gönder</button>
      </div>
    </div>
    <div class="success-msg" id="onbasvuru-success">Başvurunuz alındı. Teşekkürler — en kısa sürede iletişime geçilecektir.</div>
    <div class="error-msg" id="onbasvuru-error">Gönderim başarısız oldu. Lütfen tekrar deneyin veya iletişim bölümünden ulaşın.</div>
  </form>
</div>
<script>
  // Basit AJAX gönderimi (fetch). Backend: onbasvuru_handler.php
  document.getElementById('onbasvuru-form').addEventListener('submit', async function(e){
    e.preventDefault();
    const btn = this.querySelector('.btn-submit');
    btn.disabled = true;
    btn.textContent = 'Gönderiliyor...';

    const form = new FormData(this);

    try{
      const resp = await fetch('/onbasvuru_handler.php', {
        method: 'POST',
        body: form
      });
      const data = await resp.json();
      if(data.success){
        document.getElementById('onbasvuru-success').style.display = 'block';
        document.getElementById('onbasvuru-error').style.display = 'none';
        this.reset();
      } else {
        throw new Error(data.message || 'Sunucu hatası');
      }
    } catch(err){
      console.error(err);
      document.getElementById('onbasvuru-error').style.display = 'block';
      document.getElementById('onbasvuru-success').style.display = 'none';
    } finally {
      btn.disabled = false;
      btn.textContent = 'Gönder';
    }
  });
</script>

<style>

.modal {
    display: none;
    position: fixed;
    z-index: 999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
}

/* Modal içi */
.modal-content {
    background: #fff;
    width: 350px;
    margin: 15% auto;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    animation: scaleIn .3s ease;
}

/* Animasyon */
@keyframes scaleIn {
    from { transform: scale(0.7); opacity: 0; }
    to   { transform: scale(1); opacity: 1; }
}

.close {
    float: right;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
}

/* Input */
.modal-content input {
    width: 90%;
    padding: 10px;
    margin-top: 15px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

/* Button */
.modal-content button {
    margin-top: 15px;
    padding: 10px 20px;
    background: #6bd650;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}
.modal-content button:hover {
    background: #0056b3;
}
</style>

<script>
function kontrolEt() {
    var secilen = document.getElementById("sinif").value;
    if (secilen === "diger") {
        document.getElementById("myModal").style.display = "block";
    }
}

function modalKapat() {
    document.getElementById("myModal").style.display = "none";
}
</script>